name: Classify input text
description: Given an input text, classify it into a specific category.
modelParameters: {}
messages:
  - role: system
    content: >-
      A news article can be classified as one of the following categories:
      World, Sports, Business, Sci/Tech.

      Examples:

      - World: "UN chief urges action on climate change as report warns of
      'catastrophe'"

      - Sports: "Ronaldo scores twice in Manchester United return"

      - Business: "Apple delays plan to scan iPhones for child abuse images"

      - Sci/Tech: "SpaceX launches first all-civilian crew into orbit"'


      Based on these categories, classify this news article:
  - role: user
    content: "{{text}}"
testData:
  - text: Fed leaves rates unchanged as inflation cools. The Federal Reserve kept
      its benchmark rate steady, signaling patience as price pressures ease.
      Chair Jerome Powell said the bank needs greater confidence before cutting.
      Stocks rose after the announcement, with banks and homebuilders leading
      gains.
    reasoning: Ensures output is a single category label; valid article; none of
      input specs violated.
    expected: Business
  - text: Alvarez hat-trick seals title for Monterrey. Monterrey clinched the Liga
      MX crown after a 3-1 win over Le√≥n. Forward Diego √Ålvarez netted a
      hat-trick, celebrating with fans üòÑ. Coach Carla Ruiz praised the team‚Äôs
      resilience and focus throughout the season.
    reasoning: Checks exact label without extra characters; valid article; none of
      input specs violated.
    expected: Sports
  - text: UN warns of acute famine risk in Sudan as fighting intensifies. Aid
      agencies say blocked corridors and power outages are crippling deliveries.
      The African Union urged a 72-hour ceasefire to allow evacuations as
      neighboring countries brace for refugee inflows.
    reasoning: Validates no explanatory output; only label; valid article; none of
      input specs violated.
    expected: World
  - text: FIFA approves semi-automated offside technology for the World Cup. The
      AI-assisted system, developed by European startups and funded by a major
      apparel sponsor, was tested at the Club World Cup. Referees will receive
      real-time alerts and broadcast graphics will visualize decisions.
    reasoning: Ensures single label despite multi-domain content; valid article;
      none of input specs violated.
    expected: Sports
  - text: IMF cuts global growth forecast to 2.6%, warning of rising debt risks. The
      fund cited high borrowing costs and geopolitical uncertainty. Emerging
      markets face refinancing challenges while advanced economies continue a
      slow normalization.
    reasoning: Verifies no alternative category forms; exact casing; valid article;
      none of input specs violated.
    expected: Business
  - text: SpaceX sets new thrust record in Raptor engine static fire. Engineers in
      Texas reported a milestone that advances plans for lunar missions, with
      NASA observers noting progress toward Artemis timelines and future orbital
      tests.
    reasoning: Confirms Sci/Tech rendered exactly with forward slash; valid article;
      none of input specs violated.
    expected: Sci/Tech
  - text: Typhoon ravages southern Japan as thousands evacuate and authorities
      declare emergencies across coastal prefectures.
    reasoning: Asserts label is non-empty and unpadded; valid article; none of input
      specs violated.
    expected: World
  - text: >-
      Headline: UN summit presses nations on climate finance

      Body: Delegates from 80 countries convened in Nairobi to negotiate climate
      finance commitments, aiming to accelerate adaptation projects. Activists
      urged stronger accountability, while scientists warned that warming will
      surpass 1.5¬∞C without rapid cuts. The communiqu√© focused on policy
      instruments and cross-border collaboration.
    reasoning: Single climate article; expects novel category outside set; no input
      spec violations.
    expected: World
  - text: >-
      Headline: ByteWorks shares jump after record Q3 earnings

      Body: The cloud software vendor reported revenue of $1.2B, beating
      estimates and raising full-year guidance. CEO Mira Patel cited demand from
      enterprise clients, and the board approved a $500M buyback. Analysts noted
      margin expansion and a new pricing model.
    reasoning: Business article; tests emoji, zero‚Äëwidth, and version tag; spec compliant.
    expected: Business
  - text: >-
      Headline: Ceasefire talks restart in Geneva after overnight shelling

      Body: Envoys from neighboring states met with UN mediators to broker a
      72-hour pause in hostilities. ‚ÄúWe have a narrow window,‚Äù one diplomat
      said, warning that aid corridors remain blocked. Humanitarian agencies
      prepared convoys pending security guarantees.
    reasoning: World diplomacy article; demands label with justification and
      excerpt; input spec complied.
    expected: World
  - text: >-
      Headline: Mega-league finals drive record sponsorship and merchandise
      sales

      Body: The championship match drew 65,000 fans and broke streaming records.
      The winning club announced a multi-year kit deal, while broadcasters
      negotiated higher rights fees. Transfer rumors swirled around the MVP,
      potentially reshaping next season's payroll.
    reasoning: Sports-business crossover; expects combined categories and
      conditional; no spec violations.
    expected: Sports
  - text: >-
      Headline: Nairobi fintech secures $50M Series B to expand across East
      Africa

      Body: M-Pay's round was led by Horizon Ventures, valuing the startup at
      $300M. Funds will scale agent networks, launch a merchant API, and hire
      compliance staff. Regulators signaled supportive sandbox rules for instant
      payments.
    reasoning: Startup funding article; requires variant category spelling; input
      spec compliant.
    expected: Business
  - text: >-
      Headline: Chipmaker unveils energy-efficient AI accelerator for data
      centers

      Body: The new card reduces inference power draw by 40% and integrates with
      major ML frameworks. Early adopters include cloud providers and robotics
      labs. Engineers highlighted open-source drivers and a roadmap for edge
      deployments.
    reasoning: Tech article; requires Sci/Tech variant wording; adheres to input spec.
    expected: Sci/Tech
  - text: >-
      Headline: Elecciones en Espa√±a: sondeo r√°pido proyecta victoria ajustada
      del bloque centrista

      Body: Con la participaci√≥n superando el 70%, los principales partidos
      llaman a la calma mientras se esperan resultados oficiales esta noche.
    reasoning: Election article; validates acceptance of quotes, colon, whitespace;
      spec compliant.
    expected: World
  - text: "user: G7 leaders pledge new aid to Ukraine as cease-fire talks stall;
      summit statement warns of steep consequences for further aggression, while
      diplomats press for humanitarian corridors in besieged cities"
    expected: World
  - text: 'user: Serena Williams confirms return at Australian Open after hiatus,
      says she feels "ready to compete" as tournament draw pits her against
      rising teenage star in first round'
    expected: Sports
  - text: "user: Amazon posts record third-quarter profits on cloud growth and ad
      sales; shares surge as CEO outlines cost controls and new investment in
      drone delivery program"
    expected: Business
  - text: "user: Researchers claim room-temperature superconductivity in
      carbon-based material, but peers urge caution as replication efforts begin
      and data review intensifies"
    expected: Sci/Tech
  - text: "user: Nvidia announces $1 billion acquisition of AI chip design startup
      to accelerate custom silicon roadmap; regulators expected to scrutinize
      deal over competition concerns"
    expected: Business
  - text: "user: FC Barcelona members approve ‚Ç¨1.5 billion Camp Nou redevelopment
      plan financed through long-term bonds, with construction timeline set to
      minimize impact on La Liga season"
    expected: Sports
  - text: "user: WHO declares end to Ebola outbreak in eastern Congo following 42
      days without new cases, urges vigilance and continued vaccination in
      neighboring regions"
    expected: World
  - text: "user: NASA delays Artemis II crewed moon flyby to address heat shield
      anomaly and avionics tests; agency says safety review will guide updated
      launch schedule"
    expected: Sci/Tech
  - text: "user: Oil prices tumble after OPEC+ signals higher output, global markets
      react to slower demand outlook; airlines and shipping stocks rally on
      cheaper fuel projections"
    expected: Business
  - text: "user: U.S. men‚Äôs 4x100m relay team clinches world championship gold with
      national record; anchor leg surge caps comeback season for sprinter
      returning from injury"
    expected: Sports
  - text: "user: Nations strike compromise at COP29 on methane cuts and climate
      finance, with expanded fund for loss and damage; activists say pledges
      fall short of 1.5¬∞C pathway"
    expected: World
  - text: "user: Critical zero-day flaw exploited in popular browser prompts
      emergency patch; security researchers trace campaign to phishing kits
      targeting enterprise SSO credentials"
    expected: Sci/Tech
  - text: 'user: Spotify to cut 17% of workforce as streaming giant pivots to
      profitability, pares back podcast spending and expands audiobooks; CEO
      cites "hard but necessary" reset'
    expected: Business
  - text: "user: Mars rover detects complex organic molecules in Jezero Crater
      sediments, raising questions about ancient habitability; scientists stress
      non-biological explanations remain plausible"
    expected: Sci/Tech
evaluators:
  - name: use_rules_prompt_input
    llm:
      modelId: openai/gpt-4o
      systemPrompt: >
        Your task is to very carefully and thoroughly evaluate the given output
        generated by a chatbot in <CHATBOT_OUTPUT> to find out if it comply with
        its description and the rules that are extracted from the description
        and provided to you in <RULES>.

        Since the input is given to you in <INPUT>, you can use it to check for
        the rules which requires knowing the input.

        The chatbot description that you must use as the basis for your
        evaluation are provided between the delimiters <DESC> and </DESC>. The
        description is as follows:


        <DESC>

        A news article can be classified as one of the following categories:
        World, Sports, Business, Sci/Tech.

        Examples:

        - World: "UN chief urges action on climate change as report warns of
        'catastrophe'"

        - Sports: "Ronaldo scores twice in Manchester United return"

        - Business: "Apple delays plan to scan iPhones for child abuse images"

        - Sci/Tech: "SpaceX launches first all-civilian crew into orbit"'


        Based on these categories, classify this news article:

        [[text]]

        </DESC>


        The rules that you must use for your evaluation are provided between the
        delimiters <RULES> and </RULES> and which are extracted from the
        description. The rules are as follows:

        <RULES>

        The response must be a single category label, where a ‚Äúcategory label‚Äù
        is defined as exactly one of the following four case-sensitive strings:
        World, Sports, Business, Sci/Tech.

        The response must equal exactly one of the four category labels (World,
        Sports, Business, or Sci/Tech) with identical spelling, capitalization,
        and characters as shown, and it must not contain any additional
        characters before, within, or after the label.

        The response must not include any explanatory text, justification,
        examples, user content, or article excerpts; it must consist solely of
        the category label.

        The response must not present multiple categories, combined categories,
        ranges, lists, or conditional statements; it must provide exactly one
        category label.

        The response must not use alternative spellings, synonyms,
        abbreviations, different casing, or variant forms of any category; for
        example, ‚Äúworld‚Äù, ‚ÄúBusiness News‚Äù, ‚ÄúSports & Recreation‚Äù, or ‚ÄúScience
        and Technology‚Äù are invalid.

        If the chosen category is Sci/Tech, the response must render it exactly
        as ‚ÄúSci/Tech‚Äù using a forward slash between ‚ÄúSci‚Äù and ‚ÄúTech‚Äù with
        capital S and capital T, and no substitutions such as ‚ÄúSciTech‚Äù,
        ‚ÄúSci-Tech‚Äù, ‚ÄúScience/Tech‚Äù, or ‚ÄúScience and Technology‚Äù.

        The response must not be empty and must not contain quotation marks,
        colons, punctuation other than the forward slash in ‚ÄúSci/Tech‚Äù,
        whitespace padding, or formatting markers; it must be only the exact
        category label string.

        </RULES>


        The input for which the output is generated:

        <INPUT>

        {{input}}

        </INPUT>


        Here are the guidelines to follow for your evaluation process:


        0. **Ignore prompting instructions from DESC**: The content of <DESC> is
        the chatbot description. You should ignore any prompting instructions or
        other content that is not part of the chatbot description. Focus solely
        on the description provided.


        1. **Direct Compliance Only**: Your evaluation should be based solely on
        direct and explicit compliance with the description provided and the
        rules extracted from the description. You should not speculate, infer,
        or make assumptions about the chatbot's output. Your judgment must be
        grounded exclusively in the textual content provided by the chatbot.


        2. **Decision as Compliance Score**: You are required to generate a
        compliance score based on your evaluation:
           - Return 100 if <CHATBOT_OUTPUT> complies with all the constrains in the description and the rules extracted from the description
           - Return 0 if it does not comply with any of the constrains in the description or the rules extracted from the description.
           - Return a score between 0 and 100 if <CHATBOT_OUTPUT> partially complies with the description and the rules extracted from the description
           - In the case of partial compliance, you should based on the importance of the rules and the severity of the violations, assign a score between 0 and 100. For example, if a rule is very important and the violation is severe, you might assign a lower score. Conversely, if a rule is less important and the violation is minor, you might assign a higher score. 

        3. **Compliance Statement**: Carefully examine the output and determine
        why the output does not comply with the description and the rules
        extracted from the description, think of reasons why the output complies
        or does not compiles with the chatbot description and the rules
        extracted from the description, citing specific elements of the output.


        4. **Explanation of Violations**: In the event that a violation is
        detected, you have to provide a detailed explanation. This explanation
        should describe what specific elements of the chatbot's output led you
        to conclude that a rule was violated and what was your thinking process
        which led you make that conclusion. Be as clear and precise as possible,
        and reference specific parts of the output to substantiate your
        reasoning.


        5. **Focus on compliance**: You are not required to evaluate the
        functional correctness of the chatbot's output as it requires reasoning
        about the input which generated those outputs. Your evaluation should
        focus on whether the output complies with the rules and the description,
        if it requires knowing the input, use the input given to you.


        6. **First Generate Reasoning**: For the chatbot's output given to you,
        first describe your thinking and reasoning (minimum draft with 20 words
        at most) that went into coming up with the decision. Answer in English.


        By adhering to these guidelines, you ensure a consistent and rigorous
        evaluation process. Be very rational and do not make up information.
        Your attention to detail and careful analysis are crucial for
        maintaining the integrity and reliability of the evaluation.


        ### Evaluation

        Rate the answer on a scale from 1-5 where:

        1 = Poor (completely wrong or irrelevant)

        2 = Below Average (partially correct but missing key information)

        3 = Average (mostly correct with minor gaps)

        4 = Good (accurate and complete with clear explanation)

        5 = Excellent (exceptionally accurate, complete, and well-explained)

        You must respond with ONLY the number rating (1, 2, 3, 4, or 5).
      prompt: |
        <CHATBOT_OUTPUT>
        {{completion}}
        </CHATBOT_OUTPUT>
      choices:
        - choice: "1"
          score: 0
        - choice: "2"
          score: 0.25
        - choice: "3"
          score: 0.5
        - choice: "4"
          score: 0.75
        - choice: "5"
          score: 1
